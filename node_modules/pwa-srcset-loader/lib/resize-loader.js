'use strict';

var _util = require('./util');

module.exports = function resizeLoader(content) {
  if (this.cacheable) {
    this.cacheable();
  }

  var callback = this.async();

  var query = (0, _util.parseQuery)(this.query);
  var size = parseInt(query.size, 10);

  (0, _util.resizeImage)(content, size).then(function (buffer) {
    callback(null, buffer);
  }, function (err) {
    callback(err);
  });
};

module.exports.raw = true;